"use strict";jsToolBar.prototype.elements.serie={type:"button",title:"Serie",shortkey:"KeyS",shortkey_name:"S",fn:{}},dotclear.mergeDeep(jsToolBar.prototype.elements,dotclear.getData("legacy_editor_series")),jsToolBar.prototype.elements.serie.context="post",jsToolBar.prototype.elements.serie.fn.wiki=function(){this.encloseSelection("","",e=>""===e?(window.alert(dotclear.msg.no_selection),""):e.includes(",")?e:(window.dc_serie_editor.addMeta(e),`[${e}|serie:${e}]`))},jsToolBar.prototype.elements.serie.fn.markdown=function(){const{url:e}=this.elements.serie;this.encloseSelection("","",function(t){if(""===t)return window.alert(dotclear.msg.no_selection),"";if(t.includes(","))return t;window.dc_serie_editor.addMeta(t);const o=this.stripBaseURL(`${e}/${t}`);return`[${t}](${o})`})},jsToolBar.prototype.elements.serie.fn.xhtml=function(){const{url:e}=this.elements.serie;this.encloseSelection("","",function(t){if(""===t)return window.alert(dotclear.msg.no_selection),"";if(t.includes(","))return t;window.dc_serie_editor.addMeta(t);const o=this.stripBaseURL(`${e}/${t}`);return`<a href="${o}">${t}</a>`})},jsToolBar.prototype.elements.serie.fn.wysiwyg=function(){const e=this.getSelectedText();if(""===e)return void window.alert(dotclear.msg.no_selection);if(e.includes(","))return;const t=this.getSelectedNode(),o=document.createElement("a");o.href=this.stripBaseURL(`${this.elements.serie.url}/${e}`),o.appendChild(t),this.insertNode(o),window.dc_serie_editor.addMeta(e)};
