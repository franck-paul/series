"use strict";jsToolBar.prototype.elements.serie={group:"metadata",type:"button",title:"Serie",key:"s",shortkey_name:"S",fn:{}},dotclear.mergeDeep(jsToolBar.prototype.elements,dotclear.getData("legacy_editor_series")),jsToolBar.prototype.elements.serie.context="post",jsToolBar.prototype.elements.serie.fn.wiki=function(){this.encloseSelection("","",e=>""===e?(globalThis.alert(dotclear.msg.no_selection),""):e.includes(",")?e:(globalThis.dc_serie_editor.addMeta(e),`[${e}|serie:${e}]`))},jsToolBar.prototype.elements.serie.fn.markdown=function(){const{url:e}=this.elements.serie;this.encloseSelection("","",function(t){if(""===t)return globalThis.alert(dotclear.msg.no_selection),"";if(t.includes(","))return t;globalThis.dc_serie_editor.addMeta(t);const s=this.stripBaseURL(`${e}/${t}`);return`[${t}](${s})`})},jsToolBar.prototype.elements.serie.fn.xhtml=function(){const{url:e}=this.elements.serie;this.encloseSelection("","",function(t){if(""===t)return globalThis.alert(dotclear.msg.no_selection),"";if(t.includes(","))return t;globalThis.dc_serie_editor.addMeta(t);const s=this.stripBaseURL(`${e}/${t}`);return`<a href="${s}">${t}</a>`})},jsToolBar.prototype.elements.serie.fn.wysiwyg=function(){const e=this.getSelectedText();if(""===e)return void globalThis.alert(dotclear.msg.no_selection);if(e.includes(","))return;const t=this.getSelectedNode(),s=document.createElement("a");s.href=this.stripBaseURL(`${this.elements.serie.url}/${e}`),s.appendChild(t),this.insertNode(s),globalThis.dc_serie_editor.addMeta(e)};
