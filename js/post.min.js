"use strict";dotclear.mergeDeep(dotclear.msg,dotclear.getData("editor_series_msg")),$((()=>{$("#edit-entry").on("onetabload",(()=>{const e=$("#series-edit");let t=$("#id"),s=null,r=null;if(e.length>0){t=t.length>0&&t.get(0).value,0==t&&(s=$('<input type="hidden" name="post_series" />'),s.val($("#post_series").val()));const a=dotclear.getData("editor_series_options");r=new metaEditor(e,s,"serie",a),r.displayMeta("serie",t,"post_meta_serie_input"),window.dc_serie_editor=r}$("#post_meta_serie_input").autocomplete(r.service_uri,{extraParams:{f:"searchMetadata",metaType:"serie",json:1},delay:1e3,multiple:!0,multipleSeparator:", ",matchSubset:!1,matchContains:!0,parse(e){const t=[];if(e.success)for(const s of e.payload)t[t.length]={data:{id:s.meta_id,count:s.count,percent:s.roundpercent},result:s.meta_id};return t},formatItem:e=>e.id+" <em>("+dotclear.msg.series_autocomplete.replace("%p",e.percent).replace("%e",`${e.count} ${e.count>1?dotclear.msg.entries:dotclear.msg.entry}`)+")</em>",formatResult:e=>e.result})})),$("h5 .s-series").toggleWithLegend($(".s-series").not("label"),{user_pref:"post_series",legend_click:!0})}));
