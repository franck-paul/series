"use strict";dotclear.mergeDeep(dotclear.msg,dotclear.getData("editor_series_msg")),$((()=>{const e=$("#new_series");e.after('<div id="series_list"></div>'),e.hide();const t=dotclear.getData("editor_series_options"),a=$("#series_list"),s=new metaEditor(a,e,"serie",t);s.meta_dialog=$('<input type="text" />'),s.meta_dialog.attr("title",s.text_add_meta.replace(/%s/,s.meta_type)),s.meta_dialog.attr("id","post_meta_serie_input"),s.meta_dialog.css("width","90%"),s.addMetaDialog(),$('input[name="save_series"]').on("click",(()=>{e.val($("#post_meta_serie_input").val())})),$("#post_meta_serie_input").autocomplete(s.service_uri,{extraParams:{f:"searchMetadata",metaType:"serie",json:1},delay:1e3,multiple:!0,matchSubset:!1,matchContains:!0,parse(e){const t=[];if(e.success)for(const a of e.payload)t[t.length]={data:{id:a.meta_id,count:a.count,percent:a.roundpercent},result:a.meta_id};return t},formatItem:e=>e.id+" <em>("+dotclear.msg.series_autocomplete.replace("%p",e.percent).replace("%e",`${e.count} ${e.count>1?dotclear.msg.entries:dotclear.msg.entry}`)+")</em>",formatResult:e=>e.result})}));
