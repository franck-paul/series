"use strict";dotclear.mergeDeep(dotclear.msg,dotclear.getData("editor_series_msg")),$((()=>{const e=$("#new_series");e.after('<div id="series_list"></div>'),e.hide();const t=$("#series_list"),a=new metaEditor(t,e,"serie",dotclear.getData("editor_series_options"));a.meta_url="plugin.php?p=series&m=serie_posts&amp;serie=",a.meta_dialog=$('<input type="text" />'),a.meta_dialog.attr("title",a.text_add_meta.replace(/%s/,a.meta_type)),a.meta_dialog.attr("id","post_meta_serie_input"),a.meta_dialog.css("width","90%"),a.addMetaDialog(),$('input[name="save_series"]').on("click",(()=>{e.val($("#post_meta_serie_input").val())})),$("#post_meta_serie_input").autocomplete(a.service_uri,{extraParams:{f:"searchMeta",metaType:"serie"},delay:1e3,multiple:!0,matchSubset:!1,matchContains:!0,parse(e){const t=[];return $(e).find("meta").each((function(){t[t.length]={data:{id:$(this).text(),count:$(this).attr("count"),percent:$(this).attr("roundpercent")},result:$(this).text()}})),t},formatItem:e=>e.id+" <em>("+dotclear.msg.series_autocomplete.replace("%p",e.percent).replace("%e",`${e.count} ${e.count>1?dotclear.msg.entries:dotclear.msg.entry}`)+")</em>",formatResult:e=>e.result})}));
